(this.webpackJsonpgetdataserver=this.webpackJsonpgetdataserver||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),o=n.n(r),a=n(16),s=n.n(a),i=n(5),u=n.n(i),l=n(6),j=n(3),d=n(4),b=n.n(d),h=function(e){var t=e.note;return Object(c.jsx)("li",{children:t.content})},O=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=null;var p=function(e){f="bearer ".concat(e)},g=function(e){var t=e.handleLogin,n=e.username,r=e.password,o=e.handleUsernameChange,a=e.handlePasswordChange;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:"Log in to application"})}),Object(c.jsxs)("div",{children:["username: \xa0",Object(c.jsx)("input",{type:"text",value:n,name:"Username",onChange:o})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{children:["password: \xa0",Object(c.jsx)("input",{type:"password",value:r,name:"Password",onChange:a})]}),Object(c.jsx)("button",{type:"submit",children:"login"})]})},v=o.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),o=Object(j.a)(n,2),a=o[0],s=o[1],i={display:a?"none":""},u={display:a?"":"none"},l=function(){s(!a)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:l}})),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{style:i,children:Object(c.jsx)("button",{onClick:l,children:e.buttonLabel})}),Object(c.jsxs)("div",{style:u,children:[e.children,Object(c.jsx)("button",{onClick:l,children:"cancel"})]})]})})),x=function(e){var t=e.createNote,n=Object(r.useState)(""),o=Object(j.a)(n,2),a=o[0],s=o[1];return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:a,important:Math.random()>.5}),s("")},children:[Object(c.jsx)("input",{value:a,onChange:function(e){s(e.target.value)}}),Object(c.jsx)("button",{type:"submit",children:"save"})]})},m=function(){var e=Object(r.useRef)(),t=Object(r.useState)([]),n=Object(j.a)(t,2),o=n[0],a=n[1],s=Object(r.useState)(!0),i=Object(j.a)(s,2),d=i[0],m=i[1],w=Object(r.useState)(""),S=Object(j.a)(w,2),y=S[0],N=S[1],k=Object(r.useState)(""),C=Object(j.a)(k,2),L=C[0],U=C[1],I=Object(r.useState)(""),J=Object(j.a)(I,2),P=J[0],E=J[1],A=Object(r.useState)(null),D=Object(j.a)(A,2),M=D[0],R=D[1];Object(r.useEffect)((function(){console.log("effect"),b.a.get("/notes").then((function(e){console.log("promise fulfilled"),a(e.data)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(void 0===e&&console.log("loggedUserJSON is undefined"),e){var t=JSON.parse(e);R(t),p(t.token)}}),[]);var T=function(t){e.current.toggleVisibility();var n={headers:{Authorization:f}};console.log("config inside of addNote is ==",n),b.a.post("/notes",t,n).then((function(e){return a(o.concat(e.data))})).catch((function(e){return N("Posting Note ='".concat(t.content,"' has not done "))}),setTimeout((function(){N("")}),5e3))},V=d?o:o.filter((function(e){return e.important})),z=function(){return""===y?Object(c.jsx)("div",{}):Object(c.jsx)("div",{className:"error",children:y})},B=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O({username:L,password:P});case 4:n=e.sent,console.log("user in handlelogin ===",n),window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),p(n.token),R(n),U(""),E(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),N("Wrong credentials"),setTimeout((function(){N("")}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Notes"}),Object(c.jsx)(z,{}),null===M?Object(c.jsx)(v,{buttonLabel:"login",children:Object(c.jsx)(g,{username:L,password:P,handleUsernameChange:function(e){var t=e.target;return U(t.value)},handlePasswordChange:function(e){var t=e.target;return E(t.value)},handleLogin:B})}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("button",{onClick:function(){R(null),window.localStorage.removeItem("loggedNoteappUser")},children:"Log out"}),"\xa0\xa0\xa0",M.name," ",Object(c.jsx)("span",{children:"Logged in"})," "]}),Object(c.jsx)(v,{buttonLabel:"Add Note",ref:e,children:Object(c.jsx)(x,{createNote:T})})]}),Object(c.jsx)("ul",{children:V.map((function(e,t){return Object(c.jsx)(h,{note:e},t)}))}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{children:Object(c.jsxs)("button",{onClick:function(){return m(!d)},children:["show ",d?"important":"all"]})})]})};n(41);s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root")),b.a.get("http://localhost:3003/notes").then((function(e){return console.log(e.data)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.acff7534.chunk.js.map