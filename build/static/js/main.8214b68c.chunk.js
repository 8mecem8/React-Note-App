(this.webpackJsonpgetdataserver=this.webpackJsonpgetdataserver||[]).push([[0],{41:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(1),a=n.n(c),o=n(16),s=n.n(o),u=n(5),i=n.n(u),j=n(6),l=n(3),b=n(4),d=n.n(b),O=function(t){var e=t.note;return Object(r.jsx)("li",{children:e.content})},h=function(){var t=Object(j.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/api/login",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(c.useState)([]),e=Object(l.a)(t,2),n=e[0],a=e[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),u=s[0],b=s[1],p=Object(c.useState)(!0),f=Object(l.a)(p,2),v=f[0],x=f[1],g=Object(c.useState)(null),m=Object(l.a)(g,2),w=m[0],S=m[1],k=Object(c.useState)(""),y=Object(l.a)(k,2),C=y[0],D=y[1],N=Object(c.useState)(""),E=Object(l.a)(N,2),I=E[0],J=E[1],L=Object(c.useState)(null),M=Object(l.a)(L,2),P=M[0],T=M[1];Object(c.useEffect)((function(){console.log("effect"),d.a.get("/notes").then((function(t){console.log("promise fulfilled"),a(t.data)}))}),[]),console.log("render",n.length,"notes");var z=null,A=function(t){t.preventDefault();var e={content:u,date:(new Date).toISOString(),important:Math.random()>.5},r={headers:{Authorization:z}};d.a.post("/notes",e,r).then((function(t){return a(n.concat(t.data),b(""))})).catch((function(t){return S("Posting Note ='".concat(e.content,"' has not done "))}),setTimeout((function(){S("")}),5e3))},B=function(t){b(t.target.value)},U=v?n:n.filter((function(t){return t.important})),W=function(){return""===w?Object(r.jsx)("div",{}):Object(r.jsx)("div",{className:"error",children:w})},q=function(){var t=Object(j.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,h.login({username:C,password:I});case 4:n=t.sent,r=n.token,z="bearer ".concat(r),T(n),D(""),J(""),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),S("Wrong credentials"),setTimeout((function(){S(null)}),5e3);case 15:case"end":return t.stop()}var r}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Notes"}),Object(r.jsx)(W,{}),null===P?Object(r.jsxs)("form",{onSubmit:q,children:[Object(r.jsxs)("div",{children:["username: \xa0",Object(r.jsx)("input",{type:"text",value:C,name:"Username",onChange:function(t){var e=t.target;return D(e.value)}})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{children:["password: \xa0",Object(r.jsx)("input",{type:"password",value:I,name:"Password",onChange:function(t){var e=t.target;return J(e.value)}})]}),Object(r.jsx)("button",{type:"submit",children:"login"})]}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("button",{onClick:function(){T(null)},children:"Log out"}),"\xa0\xa0\xa0",P.name," ",Object(r.jsx)("span",{children:"Logged in"})," "]}),Object(r.jsxs)("form",{onSubmit:A,children:[Object(r.jsx)("input",{value:u,onChange:B}),Object(r.jsx)("button",{type:"submit",children:"save"})]})]}),Object(r.jsx)("ul",{children:U.map((function(t,e){return Object(r.jsx)(O,{note:t},e)}))}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:Object(r.jsxs)("button",{onClick:function(){return x(!v)},children:["show ",v?"important":"all"]})})]})};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root")),d.a.get("http://localhost:3003/notes").then((function(t){return console.log(t.data)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.8214b68c.chunk.js.map