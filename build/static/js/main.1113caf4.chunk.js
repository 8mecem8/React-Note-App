(this.webpackJsonpgetdataserver=this.webpackJsonpgetdataserver||[]).push([[0],{41:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(1),a=n.n(r),o=n(16),s=n.n(o),u=n(5),i=n.n(u),l=n(6),j=n(3),b=n(4),d=n.n(b),O=function(t){var e=t.note;return Object(c.jsx)("li",{children:e.content})},h=function(){var t=Object(l.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/login",e);case 2:return n=t.sent,t.abrupt("return",n.data.catch((function(t){console.log(t)})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(r.useState)([]),e=Object(j.a)(t,2),n=e[0],a=e[1],o=Object(r.useState)(""),s=Object(j.a)(o,2),u=s[0],b=s[1],f=Object(r.useState)(!0),p=Object(j.a)(f,2),v=p[0],x=p[1],g=Object(r.useState)(null),m=Object(j.a)(g,2),w=m[0],S=m[1],k=Object(r.useState)(""),y=Object(j.a)(k,2),C=y[0],D=y[1],N=Object(r.useState)(""),E=Object(j.a)(N,2),I=E[0],J=E[1],L=Object(r.useState)(null),M=Object(j.a)(L,2),P=M[0],T=M[1];console.log("state username is",C),console.log("state password is",I),console.log("state user is",P),Object(r.useEffect)((function(){console.log("effect"),d.a.get("/notes").then((function(t){console.log("promise fulfilled"),a(t.data)}))}),[]),console.log("render",n.length,"notes");var z=null,A=function(t){t.preventDefault();var e={content:u,date:(new Date).toISOString(),important:Math.random()>.5},c={headers:{Authorization:z}};d.a.post("/notes",e,c).then((function(t){return a(n.concat(t.data),b(""))})).catch((function(t){return S("Posting Note ='".concat(e.content,"' has not done "))}),setTimeout((function(){S("")}),5e3))},B=function(t){b(t.target.value)},U=v?n:n.filter((function(t){return t.important})),W=function(){return""===w?Object(c.jsx)("div",{}):Object(c.jsx)("div",{className:"error",children:w})},q=function(){var t=Object(l.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,h.login({username:C,password:I});case 4:n=t.sent,c=n.token,z="bearer ".concat(c),T(n),D(""),J(""),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),S("Wrong credentials"),setTimeout((function(){S(null)}),5e3);case 15:case"end":return t.stop()}var c}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Notes"}),Object(c.jsx)(W,{}),null===P?Object(c.jsxs)("form",{onSubmit:q,children:[Object(c.jsxs)("div",{children:["username: \xa0",Object(c.jsx)("input",{type:"text",value:C,name:"Username",onChange:function(t){var e=t.target;return D(e.value)}})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{children:["password: \xa0",Object(c.jsx)("input",{type:"password",value:I,name:"Password",onChange:function(t){var e=t.target;return J(e.value)}})]}),Object(c.jsx)("button",{type:"submit",children:"login"})]}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("button",{onClick:function(){T(null)},children:"Log out"}),"\xa0\xa0\xa0",P.name," ",Object(c.jsx)("span",{children:"Logged in"})," "]}),Object(c.jsxs)("form",{onSubmit:A,children:[Object(c.jsx)("input",{value:u,onChange:B}),Object(c.jsx)("button",{type:"submit",children:"save"})]})]}),Object(c.jsx)("ul",{children:U.map((function(t,e){return Object(c.jsx)(O,{note:t},e)}))}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{children:Object(c.jsxs)("button",{onClick:function(){return x(!v)},children:["show ",v?"important":"all"]})})]})};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(f,{})}),document.getElementById("root")),d.a.get("http://localhost:3003/notes").then((function(t){return console.log(t.data)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.1113caf4.chunk.js.map